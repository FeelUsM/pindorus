<!DOCTYPE HTML>
<html>

<head>
	<meta charset="utf-8">
	<script src="jquery-2.2.0.js"></script>
	<script src="props_manager.js"></script>
	<script src="parser.js"></script>
</head>

<body>
	<textarea id="DB" cols="120" rows="34"></textarea>
	DB:
	<button onclick="show('DB')">show</button>
	<button onclick="show_vert('DB')">show vertically</button>
	<button onclick="show_hor('DB')">show horisontally</button>
	<button onclick="check('DB')">check</button>
	<button onclick="save('DB')">save</button>
	
	
	
	<textarea id="users" cols="120" rows="3"></textarea>
	users:
	<button onclick="show('users')">show</button>
	<button onclick="show_vert('users')">show vertically</button>
	<button onclick="show_hor('users')">show horisontally</button>
	<button onclick="check('users')">check</button>
	<button onclick="save('users')">save</button>
<script>
show('DB');
show('users');

/*
localStorage.
setItem(id, score)
getItem(id)
removeItem(id)
clear();
*/
function load(name){
	var str = localStorage.getItem(name);
	return JSON.parse(str);
}
function show(name){
	$('#'+name).val(localStorage.getItem(name))
}
function show_vert(name){
	$('#'+name).val(JSON.stringify(load(name),"",'\t'))
}
function show_hor(name){
	$('#'+name).val(JSON.stringify(load(name)))
}
function check(name){
	var str = $('#'+name).val();
	try{JSON.parse(str)}
	catch(e){
		alert('синтаксическая ошибка:\n'+ e);
		return;
	}
}
function save(name){
	var str = $('#'+name).val();
	localStorage.setItem(name,str);
	console.log('сохранено');
	//location.reload();
}
</script>
</body>

</html>
